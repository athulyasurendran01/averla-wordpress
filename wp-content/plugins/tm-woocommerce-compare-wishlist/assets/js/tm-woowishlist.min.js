!function(a){"use strict";a(document).ready(function(){function e(){a(document).on("click",d,function(d){var e=a(this);if(d.preventDefault(),!e.hasClass("in_wishlist")){var g=tmWoowishlist.ajaxurl,h={action:"tm_woowishlist_add",pid:e.data("id"),nonce:e.data("nonce"),single:e.hasClass("tm-woowishlist-button-single")};e.removeClass(c).addClass(b),a.post(g,h,function(a){if(e.removeClass(b),a.success){e.addClass(c).find(".text").text(tmWoowishlist.addedText),a.data.wishlistPageBtn&&e.after(a.data.wishlistPageBtn);var d={action:"tm_woowishlist_update"};f(null,d)}})}})}function f(e,f){e&&e.preventDefault();var g=tmWoowishlist.ajaxurl,i=a("div.tm-woocomerce-wishlist-widget-wrapper"),j=a("div.tm-woowishlist");f.isWishlistPage=!!j.length,f.isWidget=!!i.length,("tm_woowishlist_update"!==f.action||f.isWishlistPage||f.isWidget)&&(f.isWishlistPage&&(f.wishListData=JSON.stringify(j.data())),j.addClass(b),i.addClass(b),a.post(g,f,function(e){j.removeClass(b),i.removeClass(b),e.success&&(f.isWishlistPage&&a("div.tm-woowishlist-wrapper").html(e.data.wishList),f.isWidget&&i.html(e.data.widget),"tm_woowishlist_remove"===f.action&&(a(d+"[data-id="+f.pid+"]").removeClass(c).find(".text").text(tmWoowishlist.addText),a(d+"[data-id="+f.pid+"]").next(".tm-woowishlist-page-button").remove())),h()}))}function g(b){console.log(b);var c=a(b.currentTarget),d={action:"tm_woowishlist_remove",pid:c.data("id"),nonce:c.data("nonce")};f(b,d)}function h(){a(".tm-woowishlist-remove").off("click").on("click",function(a){g(a)})}var b="loading",c="added in_wishlist",d="button.tm-woowishlist-button";h(),e(),a(document).on("tm_wc_products_changed",function(){h(),e()})})}(jQuery);